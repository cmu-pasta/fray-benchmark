diff --git a/solr/core/build.gradle b/solr/core/build.gradle
index b91f2db168f..b4d83ab6148 100644
--- a/solr/core/build.gradle
+++ b/solr/core/build.gradle
@@ -191,3 +191,14 @@ dependencies {
     exclude group: "net.bytebuddy", module: "byte-buddy-agent"
   })
 }
+
+tasks.register('testJar', Jar) {
+  dependsOn classes
+  archiveClassifier = 'test'
+  from(sourceSets.test.output.getClassesDirs())
+}
+
+task copyDependencies(type: Copy) {
+  from configurations.testRuntimeClasspath
+  into "build/dependency"
+}
\ No newline at end of file
